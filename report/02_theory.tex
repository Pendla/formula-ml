\chapter{Theoretical Framework}
% Explain concepts that we rely upon throughout the report. 
This chapter will introduce the theoretical framework of the project. The following sections will include an explanation of the underlying theory and physics of racing, an introduction to the challenges of digital simulation and an overview of machine learning concepts used in the project. 


\section{Racing theory}
This section will describe some fundamental aspects of racing theory. As mentioned previously, the scope is limited to racing with a single car that should drive around a track with as little time possible.

Racing tracks are normally broad enough to allow slightly different paths for the driven. The path a driver take also affect the possible speed, and the speed affect how quickly the car can turn. Time is the result from both distance and speed according to the following formula:

\[
t = \frac{d}{v}
\]

where $d$ is the distance driven and $v$ is the average speed. The process of minimising the time is a process both minimising the distance driven and maximising the speed. It takes skill as the two need to be balanced properly.

The section will briefly describe the physics of racing. It is a core part of understanding how professional drivers drive, as will be described in the second next section.

\subsection{Underlying aspects of physics}
A moving car has momentum. In order to to change the momentum, to accelerate, brake or change direction of movement, a force need to be applied. These forces are applied through the tyres. 

The abilities of the car is limited to how great force it can apply through the tyres. If the car would try to exceed the available traction, the tyres would slide or spin. 

The brakes are generally very efficient and are mostly limited by the traction of the tyres, whereas accelerating is limited by the torque of the engine. In addition to this, drag pull to slow the down. When the car brakes, the tyres and the drag will work together, but an accelerating car has to work against the drag. These aspects make cars accelerate slower than they can brake.

As the speed increases, the kinetic energy increases quadratically. A consequence is that a greater force is required to change the momentum. Accelerating and braking takes longer time and the turning radius is larger.

The traction for different directions of a tyre are not independent from each other. If the car apply a force forwards or backwards, it affect the limit for forces sideways, and vice versa. Therefore, the car can not brake and turn as much at the same time, as is possible when only one them is done.

Due to the shape of a racing car, drag contribute to the traction as the car is pushed down, a so called down force. As the speed get larger, this effect is also increased.


\subsection{Introduction to racing lines}
A racing line denotes the path a car drive around the track.

As previously mentioned, driving fast and driving short are the key aspects to optimise, but they sometimes opposite each other. If the car drives fast, the turning radius is increased and the car might need to drive a longer path, which may take longer time in total. 

However, if the car exit a curve with a higher speed, it can benefit from a reduced time spent in the next section. It is therefore generally beneficial to prioritise higher speed on longer sections, as the difference in speed will accumulate more time.

A typical behaviour is therefore to position the car on the opposite side of where a curve is turning [insert illustation]. This enables a larger turning radius. The car brakes as late as possible to not loose time on the previous section, but turns most intensively rather early in the curve, so that it can start accelerating for the next section as early as possible. This curve will result in a late apex.

But, if another corner come close after, it might be more beneficial to exit the first curve in the way that makes the second curve most efficient. Not as much saved time can be accumulated by an increase of speed, so, the focus also shifts slightly to drive shortly. [insert illustration]



\section{Digital Simulation}
% - Discrete steps
% - Numerical errors

This section will present some key aspects of digital simulation. 

A computer cannot handle continues calculations and must rely on models of reality. This will introduce numerical errors in the calculations. It is therefore important to motivate that the errors introduced are small enough for it to not decrease the quality of the simulation.

The simulator holds a state of what it simulates. As the simulation progress by calculating what the new state should be after an amount of time. 

One of the limitations of this way of simulating is that it difficult to take in to account events that should have occurred during the time slice, or multiple degrees of derivatives. 

The mentioned limitations may lead to problems, typically for closed systems that should stay stable over time, for example planets in orbit. 



\section{Machine Learning}
Machine learning is the field of study that concentrates on algorithms that can be said to learn \cite{glossary}. This section will cover the machine learning theory and concepts that were considered and used within the project. 

\subsection{Neural networks as knowledge model}
Mathematical model. Structure similar to the structure of the human brain. A set of inputs is connected to a set of outputs with a network of artificial neurons. 

Represents a mathematical function.

A neural network with at least two hidden layers that uses sigmoid functions in the nodes can be used to approximate any real function, and the number of nodes increase how well the approximation can be \cite{mitchel:approximation}


\subsection{Supervised Learning}
Supervised learning is the process of learning with a teacher or learning from examples \cite{haykin:supervised}. A large set of example data consisting of pairs of input configurations and the corresponding correct output is used. The learning process works by letting the knowledge model, for example a neural network, predict the correct output for given inputs in the data set. The knowledge model is then corrected in order to better predict the correct output. Algorithms that learn by induction often fall into the supervised learning category \cite{glossary}.  

\subsection{Unsupervised Learning}
Unsupervised learning is a type of machine learning that in contrast to supervised learning does not learn to predict or approximate a correct output given an input, but rather learn to group sets of inputs into categories based on the input values. These algorithms are prevalent in data mining and other areas where clustering is useful. 

\subsection{Reinforcement Learning}
A central aspect of the learning process is evaluating the performance of the actor. Supervised learning algorithms compare the actors output with a set of correct values. However if there is no data set available to train on the feedback must be acquired in some other way. Reinforcement learning algorithms solve this by scoring actors on how well they perform. The set of example data used in supervised learning is replaced by some quantifiable measurement of performance, often calculated from a heuristic. 

The performance is used as the basis of some transforming process that improves the actor itself or the whole population. The modification process differs between knowledge models and learning algorithms. In a neural network the process would change the weights or topology of the network in order to improve its performance.


\subsection{Neuroevolution}

\subsection{NEAT}
